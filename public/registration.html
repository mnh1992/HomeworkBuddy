<!-- This is the form to be used to signup for WhiteBoard
In this form the user has to input the college, course_id and name and
other info required for signup -->

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="HandheldFriendly" content="true">
    <title>WhiteBoard Site</title>
    <link rel="stylesheet" type="text/css" href="mystyle.css">
    <div class="header">
        <div id="image">
            <a href="landingpage.html"><img src="wblogo.png" alt="logo" /></a>
        </div>
    </div>
</head>
<body>
<div class="container">
    <header>
        <h1>Signup for WhiteBoard</h1>
    </header>
    <div id="cont">
        <nav>
            <h2>Welcome to WhiteBoard</h2>
            <p>WhiteBoard is a homework management system for college Students and Teachers. Once the homework is published by the teacher for a particular class section, it will be automatically added to the student's account with an autogenerated email notification. Also, WhiteBoard allows you to store course related material such as notes, links, files etc. Students have the ability to share their resources with a group of students of their preference.
            </p>
        </nav>
        <form id="signupform">
            <h3>Please  fill in the follwing information</h3>
            <div>
                <label for="fname">First Name:</label>
                <input type="text" id="fname" name="firstname" placeholder="Your first name goes here">
            </div>
            <div>
                <label for="lname">Last Name:</label>
                <input type="text" id="lname" name="lastname" placeholder="Your last name goes here">
            </div>
            <div>
                <label for="role">Teacher or Student:</label>
                <select id="role">
                    <option value = "Teacher">Teacher</option>
                    <option value = "Student">Student</option>
                </select>
                <div id="divRole"></div>
            </div>
            <div>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" placeholder="Your school email goes here">
            </div>
            <div>
                <label for="password">Password:</label>
                <input type="password" id="password" name="email" placeholder="enter password">
            </div>
            <div>
                <label for="confirmPassword">Confirm Password:</label>
                <input type="password" id="confirmPassword" name="email" placeholder="confirm password">
                <div id="btn1">
                    <button type="submit"> <a href="selectSchool.html">Submit</a></button>
                </div>
            </div>
        </form>
    </div>
    <footer>Copyright @ WhiteBoard.com</footer>
</div>

<script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.4.0/firebase.js"></script>
<script src=https://cdn.jsdelivr.net/jquery.validation/1.15.1/jquery.validate.min.js></script>
<script>
    "use strict";
    $("#signupform").validate({
        rules: {
            password: {
                required: true,
                minlength: 6,
                maxlength: 10
            } ,
            confirmPassword: {
                equalTo: "#password",
                minlength: 6,
                maxlength: 10
            }
        },
        messages:{
            password: {
                required:"the password is required"
            }
        }
    });

    // Initialize Firebase
    firebase.initializeApp({
    serviceAccount: "private_key.json",
    databaseURL: "https://whiteboard-10ec5.firebaseio.com"
    });

    var usrRef = firebase.database().ref("Users");

    $('#btn1').click(function() {

        usrRef.push({
            'First Name' : fname.value ,
            'Last Name' : lname.value,
            'Role' : role.value,
            'Email' : email.value,
            'Password': password.value
        });
    });

    //Testing Registration function and Firebase
    describe('Registration', function () {
        var TestUtils = React.addons.TestUtils;
        var RegistrationAppComponent, element, renderedDOM;
        beforeEach(function (done) {
            element = React.createElement(TodoApp);
            RegistrationAppComponent = TestUtils.renderIntoDocument(element);
        });
        //Testing if button component is rendered
        it("Has a button", function () {
            let button = TestUtils.scryRenderedDOMComponentsWithTag(RegistrationAppComponent, "btn1");

            expect(button).not.toBeUndefined();
        });

        //mock data for input fields
        var mockData = {
            'First Name': John,
            'Last Name': Doe,
            'Role': Tester,
            'Email': Email@gmail.com,
            'Password': 123Testing
        };


        it("Has input fields", function () {
            expect(function () {
                TestUtils.findRenderedComponentWithType(RegistrationAppComponent, mockData);
            }).not.toThrow();
        });
        //Testing firebase calls
        describe("New User", function () {
            beforeEach(function () {
                spyOn(usrRef.fireRef, "push");
            });
            it("Causes fireBase push to be called", function () {
                let button = TestUtils.scryRenderedDOMComponentsWithTag(RegistrationAppComponent, "btn1");
                TestUtils.Simulate.click(button);
                expect(usrRef.fireRef.push).toHaveBeenCalledWith({"text": ""});
            });
        });


</script>


<script src="https://cdn.firebase.com/js/client/2.2.1/firebase.js"></script>
</body>
</html>
